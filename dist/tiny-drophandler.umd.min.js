!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyDrophandler={})}(this,function(e){"use strict";let t="getAsEntry"in DataTransferItem.prototype;async function r(e,t){let n=e.fullPath.slice(1);if(e.isFile){let r=await new Promise(t=>{e.file(t)});t[n]=r}else if(e.isDirectory){let a;delete t[n];let i=e.createReader();do for(let e of a=await new Promise((e,t)=>{i.readEntries(t=>e(t),t)}))await r(e,t);while(a.length>0)}}e.attachDropHandler=({target:e=document.documentElement,onDrop:n,onDragOver:a,onDragLeave:i})=>{let l=e=>{e.preventDefault(),a&&a(e)},o=e=>{i&&i(e)},s=async e=>{if(e.preventDefault(),i&&i(e),!e.dataTransfer)return;let a=e.dataTransfer.items,l=Object.fromEntries(Array.from(e.dataTransfer.files).map(e=>[e.name,e]));try{for(let e=0;e<a.length;e++){let n=a[e];if("file"===n.kind){let e=n[t?"getAsEntry":"webkitGetAsEntry"]();e&&!e.isFile&&await r(e,l)}}}catch(e){console.warn(e)}let o=Object.entries(l).map(([e,t])=>({file:t,fullPath:e}));0!==o.length&&n(o)};return e.addEventListener("dragover",l),e.addEventListener("dragleave",o),e.addEventListener("drop",s),()=>{e.removeEventListener("dragover",l),e.removeEventListener("dragleave",o),e.removeEventListener("drop",s)}}});
//# sourceMappingURL=tiny-drophandler.umd.min.js.map
